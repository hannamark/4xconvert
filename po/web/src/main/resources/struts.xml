<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.ui.theme" value="css_xhtml" />
    <package name="default" extends="struts-default">
        <interceptors>

            <interceptor name="nci-commonsParams"
                class="com.fiveamsolutions.nci.commons.web.struts2.interceptor.DisplayTagParametersInterceptor" />

            <interceptor name="nullCollectionElements"
                class="com.fiveamsolutions.nci.commons.web.struts2.interceptor.NullCollectionElementInterceptor" />

            <interceptor name="parameterTrim"
                class="com.fiveamsolutions.nci.commons.web.struts2.interceptor.ParameterTrimInterceptor" />

            <interceptor-stack name="poParamsPrepareParamsStack">
                <interceptor-ref name="logger"/>
                <interceptor-ref name="exception" />
                <interceptor-ref name="alias" />
                <interceptor-ref name="nci-commonsParams" />
                <interceptor-ref name="servletConfig" />
                <interceptor-ref name="prepare" />
                <interceptor-ref name="i18n" />
                <interceptor-ref name="chain" />
                <interceptor-ref name="fileUpload" />
                <interceptor-ref name="checkbox" />
                <interceptor-ref name="staticParams" />
                <interceptor-ref name="nci-commonsParams" />
                <interceptor-ref name="conversionError" />
                <interceptor-ref name="nullCollectionElements" />
                <interceptor-ref name="parameterTrim">
                    <param name="trimToNull">true</param>
                </interceptor-ref>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
           </interceptor-stack>

            <interceptor-stack name="poDefaultStack">
                <interceptor-ref name="logger"/>
                <interceptor-ref name="exception" />
                <interceptor-ref name="alias" />
                <interceptor-ref name="servletConfig" />
                <interceptor-ref name="prepare" />
                <interceptor-ref name="i18n" />
                <interceptor-ref name="chain" />
                <interceptor-ref name="debugging" />
                <interceptor-ref name="profiling" />
                <interceptor-ref name="fileUpload" />
                <interceptor-ref name="checkbox" />
                <interceptor-ref name="staticParams" />
                <interceptor-ref name="nci-commonsParams" />
                <interceptor-ref name="conversionError" />
                <interceptor-ref name="nullCollectionElements" />
                <interceptor-ref name="parameterTrim">
                    <param name="trimToNull">true</param>
                </interceptor-ref>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
           </interceptor-stack>

           <interceptor-stack name="poPerMethodValidationStack">
                <interceptor-ref name="logger"/>
                <interceptor-ref name="exception" />
                <interceptor-ref name="alias" />
                <interceptor-ref name="nci-commonsParams" />
                <interceptor-ref name="servletConfig" />
                <interceptor-ref name="prepare" />
                <interceptor-ref name="i18n" />
                <interceptor-ref name="chain" />
                <interceptor-ref name="fileUpload" />
                <interceptor-ref name="checkbox" />
                <interceptor-ref name="staticParams" />
                <interceptor-ref name="nci-commonsParams" />
                <interceptor-ref name="conversionError" />
                <interceptor-ref name="nullCollectionElements" />
                <interceptor-ref name="parameterTrim">
                    <param name="trimToNull">true</param>
                </interceptor-ref>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel</param>
                    <param name="validateAnnotatedMethodOnly">true</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
           </interceptor-stack>
        </interceptors>

        <default-interceptor-ref name="poParamsPrepareParamsStack" />

        <global-results>
            <result name="error">/error.jsp</result>
            <result name="notYetImplemented">/notYetImplemented.jsp</result>
        </global-results>

        <global-exception-mappings>
            <exception-mapping result="error" exception="java.lang.Throwable" />
        </global-exception-mappings>

        <action name="home">
            <result>/WEB-INF/jsp/home.jsp</result>
        </action>

        <action name="login/login">
            <result>/WEB-INF/jsp/login/login.jsp</result>
        </action>

        <action name="login/logout" class="com.fiveamsolutions.nci.commons.web.struts2.action.LogoutAction" method="logout">
            <result name="success" type="redirect-action">
                <param name="namespace">/</param>
                <param name="actionName">home</param>
            </result>
        </action>
    </package>

    <package name="common" extends="default" abstract="true">
    </package>

    <package name="protected" namespace="/protected" extends="common">
        <action name="**curate/search/*" class="gov.nih.nci.po.web.curation.CurateAction" method="{2}">
            <result name="success">/WEB-INF/jsp/curate/{2}.jsp</result>
            <result name="list" type="redirect-action">listAll</result>
        </action>
    </package>
</struts>
