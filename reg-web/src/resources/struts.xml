<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
 <constant name="struts.devMode" value="true" />
    <package name="default" extends="struts-default">
        <interceptors>
            <interceptor name="showDisclaimer" class="com.fiveamsolutions.nci.commons.web.struts2.interceptor.ShowSplashPageInterceptor">
                <param name="splashPageActionName">show_Disclaimer_Page</param>
                <param name="sessionFlagName">disclaimerAccepted</param>
            </interceptor>
            <interceptor name="parameterTrim"
                class="com.fiveamsolutions.nci.commons.web.struts2.interceptor.ParameterTrimInterceptor" />
            <interceptor name="maliciousInput"
                class="com.fiveamsolutions.nci.commons.web.struts2.interceptor.XSSFilterInterceptor">
               <param name="filterSymbols">false</param>
               <param name="filterControlChars">true</param>
            </interceptor>

            <interceptor-stack name="methodValidationStack">
                <interceptor-ref name="showDisclaimer" />
                <interceptor-ref name="exception" />
                <interceptor-ref name="alias" />
                <interceptor-ref name="params">
                    <!-- Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s) -->
                    <param name="excludeParams">
                        _,d-\d+?-[sop]
                    </param>
                </interceptor-ref>
                <interceptor-ref name="servletConfig" />
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="i18n" />
                <interceptor-ref name="chain" />
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="params">
                    <!-- Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s) -->
                    <param name="excludeParams">
                        _,d-\d+?-[sop]
                    </param>
                </interceptor-ref>
                <interceptor-ref name="conversionError" />
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel,reviewUpdate</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,reviewUpdate</param>
                </interceptor-ref>
                <interceptor-ref name="maliciousInput" />
                <interceptor-ref name="parameterTrim">
                    <param name="trimToNull">true</param>
                    <param name="trimFromFront">true</param>
                </interceptor-ref>
            </interceptor-stack>

        </interceptors>
        <global-results>
            <result name="applicationError">/WEB-INF/jsp/registryError.jsp</result>
            <result name="show_Disclaimer_Page">/WEB-INF/jsp/nodecorate/disclaimer.jsp</result>
        </global-results>
        <action name="logout" class="gov.nih.nci.registry.action.Logout" method="logout">
            <result>/index.jsp</result>
        </action>
        <action name="registerUser*" class="gov.nih.nci.registry.action.RegisterUserAction" method="{1}">
            <result>/WEB-INF/jsp/registerUser.jsp</result>
            <result name="myAccount">/WEB-INF/jsp/myAccount.jsp</result>
            <result name="confirmation">/WEB-INF/jsp/emailConfirmation.jsp</result>
            <result name="registerUserError">/WEB-INF/jsp/registerUser.jsp</result>
            <result name="myAccountError">/WEB-INF/jsp/myAccount.jsp</result>
            <result name="redirect_to_login" type="redirectAction">
                 <param name="actionName">searchTrial.action</param>
                 <param name="namespace">/protected</param>
                 <param name="parse">true</param>
                 <param name="userAction">${userAction}</param>
            </result>
            <result name="existingGridAccount">/WEB-INF/jsp/existingGridAccount.jsp</result>
        </action>
        <action name="login">
           <result>/WEB-INF/jsp/login.jsp</result>
        </action>
        <action name="home">
            <result>/WEB-INF/jsp/registryHome.jsp</result>
        </action>
        <action name="contact">
           <result>/WEB-INF/jsp/registryContact.jsp</result>
        </action>
        <action name="ajaxUsers*" class="gov.nih.nci.registry.action.RegisterUserAction"  method="{1}">
            <result name="viewAdminUser">/WEB-INF/jsp/nodecorate/viewadminUsers.jsp</result>
            <result name="loadAdminList">/WEB-INF/jsp/nodecorate/adminUsers.jsp</result>
        </action>
    </package>
    <package name="global" extends="default">
        <action name="disClaimerAction*" class="gov.nih.nci.registry.action.DisclaimerAction" method="{1}">
            <result name="show_Disclaimer_Page">/WEB-INF/jsp/nodecorate/disclaimer.jsp</result>
            <result name="redirect_to" type="redirectAction">
                <param name="actionName">${actionName}</param>
                <param name="parse">true</param>
                <param name="failureMessage">${failureMessage}</param>
            </result>
        </action>
        <action name="orgPop*" class="gov.nih.nci.registry.action.PopupAction" method="{1}">
            <result name="success">/WEB-INF/jsp/nodecorate/displayAffOrgList.jsp</result>
            <result name="orgs">/WEB-INF/jsp/nodecorate/lookupAffliatedOrgs.jsp</result>
            <result name="create_org_response">/WEB-INF/jsp/nodecorate/displayAffOrgList.jsp</result>
        </action>
        <action name="popup*" class="gov.nih.nci.registry.action.PopupAction" method="{1}">
            <result name="displayPasswordReset">/WEB-INF/jsp/nodecorate/passwordReset.jsp</result>
        </action>
    </package>
    <package name="admin" namespace="/admin" extends="global">
        <action name="batchUpload*" class="gov.nih.nci.registry.action.BatchUploadAction" method="{1}">
            <interceptor-ref name="fileUpload"/>
             <interceptor-ref name="params">
          <!--
              Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s)
           -->
          <param name="excludeParams">
            _,d-\d+?-[sop]
         </param>
        </interceptor-ref>

            <result>/WEB-INF/jsp/processBatch.jsp</result>
            <result name="error">/WEB-INF/jsp/processBatch.jsp</result>
            <result name="batch_confirm">/WEB-INF/jsp/batchUploadConfirm.jsp</result>
        </action>
    </package>
    <package name="protected" namespace="/protected" extends="global">
        <action name="searchTrial*" class="gov.nih.nci.registry.action.SearchTrialAction" method="{1}">
            <interceptor-ref name="methodValidationStack" />

            <result>/WEB-INF/jsp/searchTrialCriteria.jsp</result>
            <result name="view">/WEB-INF/jsp/searchTrialView.jsp</result>
            <result name="error">/WEB-INF/jsp/searchTrialCriteria.jsp</result>
            <result name="partialView">/WEB-INF/jsp/reviewTrial.jsp</result>
        </action>
        <action name="submitTrial*" class="gov.nih.nci.registry.action.SubmitTrialAction" method="{1}">
            <interceptor-ref name="methodValidationStack" />
            <result name="success">/WEB-INF/jsp/submitTrial.jsp</result>
            <result name="input">/WEB-INF/jsp/submitTrial.jsp</result>
            <result name="error">/WEB-INF/jsp/submitTrial.jsp</result>
            <result name="edit">/WEB-INF/jsp/submitTrial.jsp</result>
            <result name="review">/WEB-INF/jsp/reviewTrial.jsp</result>
            <result name="redirect_to_search" type="redirectAction">
                <param name="actionName">searchTrial.action</param>
                <param name="parse">true</param>
                <param name="trialAction">${trialAction}</param>
            </result>
        </action>
        <action name="amendTrial*" class="gov.nih.nci.registry.action.AmendmentTrialAction" method="{1}">
            <interceptor-ref name="methodValidationStack" />
            <result name="success">/WEB-INF/jsp/amendTrial.jsp</result>
            <result name="input">/WEB-INF/jsp/amendTrial.jsp</result>
            <result name="error">/WEB-INF/jsp/amendTrial.jsp</result>
            <result name="edit">/WEB-INF/jsp/amendTrial.jsp</result>
            <result name="review">/WEB-INF/jsp/reviewTrial.jsp</result>
            <result name="redirect_to_search" type="redirectAction">
                <param name="actionName">searchTrial.action</param>
                <param name="parse">true</param>
                <param name="trialAction">${trialAction}</param>
            </result>
        </action>
        <action name="updateTrial*" class="gov.nih.nci.registry.action.UpdateTrialAction" method="{1}">
            <interceptor-ref name="methodValidationStack" />
            <result name="success">/WEB-INF/jsp/updateTrial.jsp</result>
            <result name="input">/WEB-INF/jsp/updateTrial.jsp</result>
            <result name="error">/WEB-INF/jsp/updateTrial.jsp</result>
            <result name="edit">/WEB-INF/jsp/updateTrial.jsp</result>
            <result name="review">/WEB-INF/jsp/reviewUpdateTrial.jsp</result>
            <result name="redirect_to_search" type="redirectAction">
               <param name="actionName">searchTrial.action</param>
                 <param name="parse">true</param>
                 <param name="trialAction">${trialAction}</param>
            </result>
        </action>
    <action name="ajaxManageGrantsAction*" class="gov.nih.nci.registry.action.ManageGrantsAction" method="{1}">
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
        <result name="display_grants">/WEB-INF/jsp/nodecorate/displayTrialViewGrant.jsp</result>
         <result name="display_grants_add">/WEB-INF/jsp/nodecorate/addGrantForUpdate.jsp</result>
        <result name="show_ok_create">/WEB-INF/jsp/nodecorate/showWaitDialog.jsp</result>
    </action>

    <action name="ajaxManageOtherIdentifiersAction*" class="gov.nih.nci.registry.action.ManageOtherIdentifiersAction" method="{1}">
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
        <result name="display_otherIdentifiers">/WEB-INF/jsp/nodecorate/displayOtherIdentifiers.jsp</result>
        <result name="show_ok_create">/WEB-INF/jsp/nodecorate/showWaitDialog.jsp</result>
    </action>

    <action name="ajaxManageIndIdeAction*" class="gov.nih.nci.registry.action.ManageIndIdeAction" method="{1}">
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
        <result name="display_ideind">/WEB-INF/jsp/nodecorate/addIdeIndIndicator.jsp</result>
        <result name="display_ideindadd">/WEB-INF/jsp/nodecorate/addForUpdateIdeIndIndicator.jsp</result>
        <result name="show_ok_create">/WEB-INF/jsp/nodecorate/showWaitDialog.jsp</result>

    </action>
    <action name="popup*" class="gov.nih.nci.registry.action.PopupAction" method="{1}">
        <interceptor-ref name="params">
            <!-- Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s) -->
            <param name="excludeParams">
                _,d-\d+?-[sop]
            </param>
        </interceptor-ref>
        <interceptor-ref name="methodValidationStack" />
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
        <result name="orgs">/WEB-INF/jsp/nodecorate/lookuporgs.jsp</result>
        <result name="persons">/WEB-INF/jsp/nodecorate/lookuppersons.jsp</result>
        <result name="create_org_response">/WEB-INF/jsp/nodecorate/displayOrgList.jsp</result>
        <result name="create_pers_response">/WEB-INF/jsp/nodecorate/displayPersonsList.jsp</result>
    </action>
    <action name="ajaxorganizationContact*" class="gov.nih.nci.registry.action.OrganizationContactAction" method="{1}">
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
        <result name="display_org_contacts">/WEB-INF/jsp/nodecorate/lookuppersons.jsp</result>
        <result name="display_org_created_contact">/WEB-INF/jsp/nodecorate/responsibleContact.jsp</result>
    </action>
    <action name="ajaxorganizationGenericContact*" class="gov.nih.nci.registry.action.OrganizationGenericContactAction" method="{1}">
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
        <result name="display_org_genericcontacts">/WEB-INF/jsp/nodecorate/lookupByTitle.jsp</result>
        <result name="display_org_created_genericcontact">/WEB-INF/jsp/nodecorate/responsibleGenericContact.jsp</result>
        <result name="create_org_contact_response">/WEB-INF/jsp/nodecorate/displayTitleList.jsp</result>
    </action>
    <action name="ajaxselectTrial*" class="gov.nih.nci.registry.action.SubmitProprietaryTrialAction" method="{1}">
        <result>/WEB-INF/jsp/nodecorate/{1}.jsp</result>
    </action>
    <action name="submitProprietaryTrial*" class="gov.nih.nci.registry.action.SubmitProprietaryTrialAction" method="{1}">
        <interceptor-ref name="methodValidationStack" />
        <result name="success">/WEB-INF/jsp/submitProprietaryTrial.jsp</result>
        <result name="input">/WEB-INF/jsp/submitProprietaryTrial.jsp</result>
        <result name="error">/WEB-INF/jsp/submitProprietaryTrial.jsp</result>
        <result name="review">/WEB-INF/jsp/reviewProprietaryTrial.jsp</result>
        <result name="edit">/WEB-INF/jsp/submitProprietaryTrial.jsp</result>
        <result name="redirect_to_search" type="redirectAction">
             <param name="actionName">searchTrial.action</param>
             <param name="parse">true</param>
        </result>
    </action>
    <action name="ajaxgetOAuthOrgs*" class="gov.nih.nci.registry.action.SubmitTrialAction" method="{1}">
            <result>/WEB-INF/jsp/nodecorate/oversightAuthInfo.jsp</result>
    </action>
    <action name="ajaxUpload*" class="gov.nih.nci.registry.action.ManageFileAction"  method="{1}">
            <result>/WEB-INF/jsp/nodecorate/uploadDocuments.jsp</result>
    </action>
    <action name="siteAdministration*" class="gov.nih.nci.registry.action.SiteAdministrationAction" method="{1}">
        <interceptor-ref name="params">
          <!--
              Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s)
           -->
          <param name="excludeParams">
            _,d-\d+?-[sop]
         </param>
        </interceptor-ref>
        <result name="success">/WEB-INF/jsp/siteAdministration.jsp</result>
        <result name="input">/WEB-INF/jsp/siteAdministration.jsp</result>
        <result name="viewResults">/WEB-INF/jsp/siteAdministration.jsp</result>
    </action>
    <action name="updateProprietaryTrial*" class="gov.nih.nci.registry.action.UpdateProprietaryTrialAction" method="{1}">
        <interceptor-ref name="methodValidationStack" />
        <result name="success">/WEB-INF/jsp/updateProprietaryTrial.jsp</result>
        <result name="input">/WEB-INF/jsp/updateProprietaryTrial.jsp</result>
        <result name="error">/WEB-INF/jsp/updateProprietaryTrial.jsp</result>
        <result name="review">/WEB-INF/jsp/reviewUpdateProprietaryTrial.jsp</result>
        <result name="edit">/WEB-INF/jsp/updateProprietaryTrial.jsp</result>
        <result name="redirect_to_search" type="redirectAction">
             <param name="actionName">searchTrial.action</param>
             <param name="parse">true</param>
             <param name="trialAction">${trialAction}</param>
        </result>
    </action>
    <action name="manageTrialOwnership*" class="gov.nih.nci.registry.action.ManageTrialOwnershipAction" method="{1}">
        <interceptor-ref name="params">
          <!--
              Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s)
           -->
          <param name="excludeParams">
            _,d-\d+?-[sop]
         </param>
        </interceptor-ref>
        <result name="success">/WEB-INF/jsp/manageTrialOwnership.jsp</result>
        <result name="input">/WEB-INF/jsp/manageTrialOwnership.jsp</result>
        <result name="viewResults">/WEB-INF/jsp/manageTrialOwnership.jsp</result>
    </action>
    <action name="displayTrialOwnership*" class="gov.nih.nci.registry.action.DisplayTrialOwnershipAction" method="{1}">
        <interceptor-ref name="params">
          <!--
              Excludes the jQuery no-cache _ parameter and the Displaytag d-#-X parameter(s)
           -->
          <param name="excludeParams">
            _,d-\d+?-[sop]
         </param>
        </interceptor-ref>
        <result name="success">/WEB-INF/jsp/displayTrialOwnership.jsp</result>
        <result name="input">/WEB-INF/jsp/displayTrialOwnership.jsp</result>
        <result name="viewResults">/WEB-INF/jsp/displayTrialOwnership.jsp</result>
    </action>
    </package>
</struts>
