<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util.xsd">
 <!-- 
	<import
		resource="classpath:/META-INF/spring/marshaller/jaxb2-marshaller-context.xml" />
	
	<import
			resource="classpath:/META-INF/spring/mvc/rest-json-converter-context.xml" />
		<import
			resource="classpath:/META-INF/spring/mvc/rest-json-type-converter-context.xml" /> -->
		
 	<!-- <import resource="classpath:rest-client-propconfig.xml"/> -->
 	
 	<context:annotation-config/>
 
	<context:component-scan base-package="gov.nih.nci.webservices.rest.client" />	
	
 	<bean
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="location">
			<value>classpath:pa-wsclient.properties</value>
		</property>
	</bean>
 	
	
	<bean id="restClientProperties" class="gov.nih.nci.webservices.rest.client.RestClientProperties">
	</bean>
	
	<bean id="authScope"
		class="org.apache.http.auth.AuthScope">
		<constructor-arg value="${po.ws.rest.hostname}" />
		<constructor-arg value="${po.ws.rest.port}" />
	</bean>
	

	<bean id="credentials"
		class="org.apache.http.auth.UsernamePasswordCredentials">
		<constructor-arg value="${po.ws.rest.username}" />
		<constructor-arg value="${po.ws.rest.password}" />
	</bean>

	<bean id="restTemplate" class="org.springframework.web.client.RestTemplate"
		p:messageConverters-ref="messageConvertersList">
	</bean>
	
	<bean id="restClient" class="gov.nih.nci.webservices.rest.client.RestClient">
		<constructor-arg ref="restTemplate" />
		<constructor-arg ref="restClientProperties" />
		<constructor-arg ref="credentials" />
		<constructor-arg ref="authScope" />
	</bean>
	
	<bean id="familyRestServiceClient" class="gov.nih.nci.webservices.rest.client.FamilyRestServiceClientImpl">
		<constructor-arg ref="restClient" />
		<constructor-arg ref="restClientProperties" />
	</bean>

	<util:list id="messageConvertersList">
		<!-- <ref bean="marshallingHttpMessageConverter" /> -->
		<ref bean="mappingJacksonHttpMessageConverter" />
	</util:list>
	
	<!-- <bean id="marshallingHttpMessageConverter"
			class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter"
			p:supportedMediaTypes="application/xml">
			
			<property name="marshaller" ref="marshaller" />
			<property name="unmarshaller" ref="marshaller" />
			
		</bean>
		
	<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
		<property name="contextPaths">
            <array>
                <value>gov.nih.ni.po.webservices.types.FamilyList</value>
                <value>gov.nih.ni.po.webservices.types.FamilyMemberRelationshipList</value>
                <value>gov.nih.ni.po.webservices.types.OrganizationRoleList</value>
                <value>gov.nih.ni.po.webservices.types.OrganizationSearchResultList</value>
                <value>gov.nih.ni.po.webservices.types.PersonList</value>
                <value>gov.nih.ni.po.webservices.types.PersonRoleList</value>
                <value>gov.nih.ni.po.webservices.types.PersonSearchResultList</value>
            </array>
        </property>
	</bean> -->
          
     <bean id="mappingJacksonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"
          p:supportedMediaTypes="application/json"/>     
	
	<!-- <bean id="jacksonObjectMapper" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"
           p:targetMethod="disable">
        <property name="targetObject">
            <bean class="com.fasterxml.jackson.databind.ObjectMapper"/>
        </property>
        <property name="arguments">
            <list>
                <util:constant static-field="com.fasterxml.jackson.databind.DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES"/>
            </list>
        </property>
    </bean> 
          
    <bean id="mappingJacksonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"
          p:supportedMediaTypes="application/json"
          p:objectMapper-ref="jacksonObjectMapper"/> -->

</beans>